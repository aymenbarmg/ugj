<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù…ØªØ¬Ø± Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ ÙˆØ¹Ø¬Ù„Ø© Ø§Ù„Ø³Ø­Ø¨</title>
<style>
body {
    font-family: "Cairo", sans-serif;
    background: #f4f6f8;
    margin: 0;
    padding: 0;
    text-align: center;
}
header {
    background: #333;
    color: white;
    padding: 10px;
    text-align: left;
    position: relative;
}
button {
    cursor: pointer;
    padding: 5px 10px;
    margin: 5px;
}
#controlPanel {
    position: fixed;
    top: 50px;
    left: 10px;
    background: white;
    border: 1px solid #ccc;
    padding: 15px;
    display: none;
    z-index: 1000;
}
#gamesContainer {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    margin: 20px;
}
.gameCard {
    border: 1px solid #ccc;
    border-radius: 10px;
    margin: 10px;
    padding: 10px;
    width: 200px;
    background: white;
}
.gameCard img {
    width: 100%;
    border-radius: 10px;
}
#wheelContainer {
    margin: 20px auto;
    position: relative;
}
#wheel {
    border: 5px solid #333;
    border-radius: 50%;
    width: 300px;
    height: 300px;
}
#note {
    margin-top: 10px;
    font-size: 18px;
    color: #555;
}
</style>
</head>
<body>

<header>
    Ù…ØªØ¬Ø± Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨
    <button onclick="toggleControlPanel()">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… ğŸ”‘</button>
</header>

<div id="controlPanel">
    <h3>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h3>
    <div id="loginPanel">
        ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: <input type="password" id="passwordInput">
        <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
    </div>

    <div id="controlContent" style="display:none;">
        <h4>Ø¥Ø¶Ø§ÙØ© Ù„Ø¹Ø¨Ø©</h4>
        Ø§Ù„Ø§Ø³Ù…: <input type="text" id="gameName"><br>
        Ø§Ù„ØµÙˆØ±Ø©: <input type="file" id="gameImageFile" accept="image/*"><br>
        Ø§Ù„Ø³Ø¹Ø±: <input type="text" id="gamePrice"><br>
        ØªÙˆØ§ØµÙ„: <input type="text" id="gameContact"><br>
        <button onclick="addGame()">Ø¥Ø¶Ø§ÙØ© Ù„Ø¹Ø¨Ø©</button>

        <h4>Ø¥Ø¶Ø§ÙØ© Ù…ØªØ³Ø§Ø¨Ù‚</h4>
        Ø§Ù„Ø§Ø³Ù…: <input type="text" id="playerName"><br>
        <button onclick="addPlayer()">Ø¥Ø¶Ø§ÙØ© Ù…ØªØ³Ø§Ø¨Ù‚</button>

        <h4>ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©</h4>
        <input type="text" id="noteInput" placeholder="Ø§ÙƒØªØ¨ Ù…Ù„Ø§Ø­Ø¸ØªÙƒ Ù‡Ù†Ø§">
        <button onclick="updateNote()">Ø­ÙØ¸ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©</button>
    </div>
</div>

<div id="gamesContainer"></div>

<div id="wheelContainer">
    <canvas id="wheel"></canvas>
    <div id="note"></div>
</div>

<script>
// ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„Ù„ÙˆØµÙˆÙ„ Ù„Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
const PASSWORD = "1234";

let games = JSON.parse(localStorage.getItem("games")) || [];
let players = JSON.parse(localStorage.getItem("players")) || [];
let noteText = localStorage.getItem("noteText") || "";

// Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ù„ÙˆØ­Ø©
function toggleControlPanel() {
    document.getElementById("controlPanel").style.display =
        document.getElementById("controlPanel").style.display === "none" ? "block" : "none";
}

function login() {
    const input = document.getElementById("passwordInput").value;
    if(input === PASSWORD){
        document.getElementById("loginPanel").style.display = "none";
        document.getElementById("controlContent").style.display = "block";
    } else {
        alert("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø®Ø§Ø·Ø¦Ø©");
    }
}

// Ø¥Ø¶Ø§ÙØ© Ù„Ø¹Ø¨Ø© Ù…Ø¹ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø© Ù…Ø¨Ø§Ø´Ø±Ø©
function addGame() {
    const name = document.getElementById("gameName").value;
    const fileInput = document.getElementById("gameImageFile");
    const price = document.getElementById("gamePrice").value;
    const contact = document.getElementById("gameContact").value;

    if(name && fileInput.files.length > 0){
        const reader = new FileReader();
        reader.onload = function(e) {
            const imgData = e.target.result;
            games.push({name,img: imgData,price,contact});
            localStorage.setItem("games", JSON.stringify(games));
            renderGames();
            document.getElementById("gameName").value="";
            fileInput.value="";
            document.getElementById("gamePrice").value="";
            document.getElementById("gameContact").value="";
        }
        reader.readAsDataURL(fileInput.files[0]);
    } else {
        alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø©");
    }
}

// Ø¹Ø±Ø¶ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨
function renderGames() {
    const container = document.getElementById("gamesContainer");
    container.innerHTML = "";
    games.forEach(game => {
        container.innerHTML += `
        <div class="gameCard">
            <img src="${game.img}" alt="${game.name}">
            <h4>${game.name}</h4>
            <p>Ø§Ù„Ø³Ø¹Ø±: ${game.price}</p>
            <p>ØªÙˆØ§ØµÙ„: ${game.contact}</p>
        </div>`;
    });
}
renderGames();

// Ø¹Ø¬Ù„Ø© Ø§Ù„ØªØ¯ÙˆÙŠØ±
const canvas = document.getElementById("wheel");
const ctx = canvas.getContext("2d");
const radius = canvas.width/2;

function drawWheel(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    const angleStep = 2*Math.PI / (players.length || 1);
    players.forEach((player,index)=>{
        ctx.beginPath();
        ctx.moveTo(radius,radius);
        ctx.fillStyle = `hsl(${index*60},70%,70%)`;
        ctx.arc(radius,radius,radius,index*angleStep,(index+1)*angleStep);
        ctx.fill();
        ctx.stroke();
        ctx.save();
        ctx.translate(radius,radius);
        ctx.rotate((index+0.5)*angleStep);
        ctx.textAlign="right";
        ctx.fillStyle="#000";
        ctx.font="16px Cairo";
        ctx.fillText(player, radius-10,5);
        ctx.restore();
    });
}
drawWheel();

// Ø¥Ø¶Ø§ÙØ© Ù…ØªØ³Ø§Ø¨Ù‚
function addPlayer(){
    const name = document.getElementById("playerName").value;
    if(name){
        players.push(name);
        localStorage.setItem("players", JSON.stringify(players));
        drawWheel();
        document.getElementById("playerName").value="";
    } else {
        alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…ØªØ³Ø§Ø¨Ù‚");
    }
}

// Ù…Ù„Ø§Ø­Ø¸Ø©
document.getElementById("note").innerText = noteText;
function updateNote(){
    noteText = document.getElementById("noteInput").value;
    localStorage.setItem("noteText", noteText);
    document.getElementById("note").innerText = noteText;
}
</script>
</body>
</html>
